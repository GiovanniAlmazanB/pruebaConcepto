<!--**************
Nombre del Módulo: e-CINVESTAV Módulo de seguimiento de egresados del CINVESTAV-IPN.
Descripción: Pantalla principal o Home.
Nombre del desarrollador:Almazán Bombela Edwin Giovanni.
Fecha de Desarrollo: 21-Mayo-2020
Versión: 1.4.4
**************
Nombre del Modificador: Almazán Bombela Edwin Giovanni.
Descripción de la modificación: Cambios en la documentación.
Fecha de la Modificación: 25-Mayo-2020
**************-->

<!-- Pantalla de inicio o Home -->
{% extends "base.html" %}
{% block title %}
Prueba de concepto
{% endblock %}
{% block content %}

<div id="myCarousel" class="carousel slide" data-ride="carousel">
  <!-- Indicadores -->
  <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
  </ol>


<!-- Contenedor -->
<div class="container">

  <br>
  <div class="row">
    <div class="col-sm-12">

    <canvas id="myChart" style="position: relative; height: 40vh; width: 80vw;"></canvas>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        var ctx = document.getElementById('myChart')
        var myChart = new Chart(ctx, {
            type:'bar',
            data:{
                datasets: [{
                    label: 'Stock de Productos',
                    backgroundColor: ['#6bf1ab','#63d69f', '#438c6c', '#509c7f', '#1f794e', '#34444c', '#90CAF9', '#64B5F6', '#42A5F5', '#2196F3', '#0D47A1'],
                    borderColor: ['black'],
                    borderWidth:1
                }]
            },
            options:{
                scales:{
                    y:{
                        beginAtZero:true
                    }
                }
            }
        })

        let url = 'http://192.168.0.13:8080/priceDayWeek'
        fetch(url)
            .then( response => response.json() )
            .then( datos => mostrar(datos) )
            .catch( error => console.log(error) )


        const mostrar = (articulos) =>{
            articulos.forEach(element => {
                myChart.data['labels'].push(element.descripcion)
                myChart.data['datasets'][0].data.push(element.stock)
                myChart.update()
            });
            console.log(myChart.data)
        }    



    </script>

  </div>
</div><br>

{% endblock %}